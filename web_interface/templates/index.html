{% load static %}
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ููุฏูู | ุงููุณุงุนุฏ ุงููุงูููู ุงูุฐูู</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="background-mesh"></div>

    <!-- Navigation -->
    <nav class="glass-nav">
        <div class="logo">
            <i class="fa-solid fa-scale-balanced"></i>
            <span>Modqiq</span>
        </div>
        <div class="nav-links">
            <a href="#" class="active">ุงูุฑุฆูุณูุฉ</a>
            <a href="{% url 'about' %}">ุนู ุงููุธุงู</a>
            <a href="{% url 'judge_dashboard' %}" class="btn-login" style="background: var(--glass-bg);">๐จโโ๏ธ ุจูุงุจุฉ ุงููุงุถู</a>
        </div>
    </nav>

    <!-- Main Container -->
    <main class="container">
        
        <!-- Hero Section -->
        <section id="hero" class="hero-section center-content active-section">
            <div class="hero-text">
                <h1>ุงูุนุฏุงูุฉ.. <span class="highlight">ุฃุตุจุญุช ุฃุฐูู</span></h1>
                <p>ูุธุงู ุฎุจูุฑ ูุฏุนูู ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู ูุชุฏููู ุงูุฏุนุงูู ุงูุฅุฏุงุฑูุฉ ูุถูุงู ูุจูููุง ุงูุดููู ูุจู ุชูุฏูููุง.</p>
                <button class="btn-primary" onclick="startWizard()">ุงุจุฏุฃ ุงูุชุฏููู ุงูุขู <i class="fa-solid fa-arrow-left"></i></button>
            </div>
            
            <div class="stats-cards">
                <div class="glass-card float-anim-1">
                    <i class="fa-solid fa-check-double"></i>
                    <span>ุชุฏููู ุขูู</span>
                    <small>ูุญุต ุงููุจูู ุงูุดููู</small>
                </div>
                <div class="glass-card float-anim-2">
                    <i class="fa-solid fa-bolt"></i>
                    <span>ูุชุงุฆุฌ ููุฑูุฉ</span>
                    <small>ุชุญููู ุฎูุงู ุซูุงูู</small>
                </div>
            </div>
        </section>

        <!-- Wizard Section (Hidden Initially) -->
        <section id="wizard" class="wizard-section hidden">
            <div class="wizard-header">
                <div class="step-indicator">
                    <div class="step active" data-step="1">1</div>
                    <div class="line"></div>
                    <div class="step" data-step="2">2</div>
                    <div class="line"></div>
                    <div class="step" data-step="3">3</div>
                </div>
                <h2 id="step-title">ุจูุงูุงุช ุงูุฃุทุฑุงู</h2>
            </div>

            <form id="caseForm" class="glass-form">
                <!-- Step 1: Parties -->
                <div class="form-step active" id="step1">
                    <div class="form-group">
                        <label>ุตูุฉ ุงููุฏุนู</label>
                        <select name="plaintiff_type" class="glass-input">
                            <option value="INDIVIDUAL">ูุฑุฏ</option>
                            <option value="COMPANY">ุดุฑูุฉ</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>ุงุณู ุงููุฏุนู</label>
                        <input type="text" name="plaintiff_name" class="glass-input" placeholder="ุงูุงุณู ุงูุฑุจุงุนู / ุงุณู ุงูุดุฑูุฉ">
                    </div>
                    <div class="form-group">
                        <label>ุงูุฌูุฉ ุงููุฏุนู ุนูููุง</label>
                        <input type="text" name="defendant_name" class="glass-input" placeholder="ุงุณู ุงูุฌูุฉ ุงูุญููููุฉ">
                    </div>
                    <div class="actions">
                        <button type="button" class="btn-primary" onclick="nextStep(2)">ุงูุชุงูู</button>
                    </div>
                </div>

                <!-- Step 2: Decision & Grievance Details -->
                <div class="form-step" id="step2">
                    <!-- Decision Section -->
                    <h3 style="color: var(--gold); margin-bottom: 1rem; border-bottom: 1px solid var(--glass-border); padding-bottom: 0.5rem;">
                        <i class="fa-solid fa-file-contract"></i> ุจูุงูุงุช ุงููุฑุงุฑ ุงูุฅุฏุงุฑู
                    </h3>
                    
                    <div class="row">
                        <div class="form-group half">
                            <label>ุฑูู ุงููุฑุงุฑ</label>
                            <input type="text" name="decision_number" class="glass-input">
                        </div>
                        <div class="form-group half">
                            <label>ุชุงุฑูุฎ ุงููุฑุงุฑ</label>
                            <input type="date" name="decision_date" class="glass-input">
                        </div>
                    </div>

                    <div class="row">
                        <div class="form-group half">
                            <label>ุทุฑููุฉ ุงูุนูู ุจุงููุฑุงุฑ</label>
                            <select name="knowledge_method" class="glass-input">
                                <option value="direct">ุชุจููุบ ูุจุงุดุฑ</option>
                                <option value="mail">ุจุฑูุฏ ุงููุชุฑููู</option>
                                <option value="other">ุฃุฎุฑู</option>
                            </select>
                        </div>
                        <div class="form-group half">
                            <label>ุชุงุฑูุฎ ุงูุนูู ุจุงููุฑุงุฑ</label>
                            <input type="date" name="incident_date" class="glass-input"> <!-- Mapped to incident_date -->
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>ุฌูุฉ ุฅุตุฏุงุฑ ุงููุฑุงุฑ</label>
                         <input type="text" name="defendant_name" class="glass-input" placeholder="ูุซุงู: ูุฒุงุฑุฉ ุงูุชุนููู">
                    </div>

                    <!-- Grievance Section -->
                    <h3 style="color: var(--gold); margin: 1.5rem 0 1rem; border-bottom: 1px solid var(--glass-border); padding-bottom: 0.5rem;">
                        <i class="fa-solid fa-scale-unbalanced"></i> ุจูุงูุงุช ุงูุชุธูู
                    </h3>

                    <div class="form-group">
                        <label style="display: block; margin-bottom: 0.5rem;">ูู ููุฌุฏ ุชุธูู ุณุงุจูุ</label>
                        <div style="display: flex; gap: 20px;">
                            <label style="cursor: pointer; display: flex; align-items: center; gap: 8px;">
                                <input type="radio" name="has_grievance" value="yes" checked onclick="toggleGrievance(true)"> ููุฌุฏ ุชุธูู
                            </label>
                            <label style="cursor: pointer; display: flex; align-items: center; gap: 8px;">
                                <input type="radio" name="has_grievance" value="no" onclick="toggleGrievance(false)"> ูุง ููุฌุฏ ุชุธูู
                            </label>
                        </div>
                    </div>

                    <div id="grievance-fields">
                        <div class="row">
                            <div class="form-group half">
                                <label>ุฑูู ุงูุชุธูู</label>
                                <input type="text" name="grievance_number" class="glass-input">
                            </div>
                            <div class="form-group half">
                                <label>ุชุงุฑูุฎ ุงูุชุธูู</label>
                                <input type="date" name="grievance_date" class="glass-input">
                            </div>
                        </div>

                        <div class="form-group">
                            <label>ุงูุฌูุฉ ุงููุชุธูู ููุง</label>
                            <input type="text" name="grievance_authority" class="glass-input">
                        </div>

                        <div class="row">
                            <div class="form-group half">
                                <label>ุชุงุฑูุฎ ุงูุจุช ูู ุงูุชุธูู</label>
                                <input type="date" name="grievance_outcome_date" class="glass-input">
                            </div>
                            <div class="form-group half">
                                <label>ูุชูุฌุฉ ุงูุชุธูู</label>
                                <input type="text" name="grievance_outcome" class="glass-input">
                            </div>
                        </div>
                    </div>

                    <div class="actions">
                        <button type="button" class="btn-ghost" onclick="prevStep(1)">ุณุงุจู</button>
                        <button type="button" class="btn-primary" onclick="nextStep(3)">ุงูุชุงูู</button>
                    </div>
                </div>

                <!-- Step 3: Description -->
                <div class="form-step" id="step3">
                    <div class="form-group">
                        <label>ุชูุงุตูู ุงูุฏุนูู</label>
                        <textarea name="description" class="glass-input" rows="6" placeholder="ุงูุชุจ ุชูุงุตูู ุฏุนูุงู ููุง... ุณูููู ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุจุชุญููููุง."></textarea>
                    </div>
                    <div class="form-group" style="margin-top: 2rem;">
                        <label>ููุน ุงูุทูุจ</label>
                        <select name="request_type" class="glass-input">
                            <option value="ADMINISTRATIVE_DECISION">ุงูุทุนู ูู ูุฑุงุฑ ุฅุฏุงุฑู</option>
                            <option value="COMPENSATION">ูุทุงูุจุฉ ุจุงูุชุนููุถ</option>
                        </select>
                    </div>
                     <div class="form-group" style="margin-top: 1rem;">
                        <label>ุฅุฑูุงู ุงููุณุชูุฏุงุช (ุงุฎุชูุงุฑู)</label>
                        <input type="file" name="documents" class="glass-input" multiple>
                    </div>
                    <div class="actions">
                        <button type="button" class="btn-ghost" onclick="prevStep(2)">ุณุงุจู</button>
                        <button type="button" class="btn-accent" onclick="submitCase()">
                            <i class="fa-solid fa-wand-magic-sparkles"></i> ุชุฏููู ุฐูู
                        </button>
                    </div>
                </div>
            </form>
        </section>
        
        <!-- Loading State -->
        <section id="loading" class="loading-section hidden">
            <div class="loader">
                <div class="scanner"></div>
            </div>
            <h3>ุฌุงุฑู ุชุญููู ุงูุจูุงูุงุช ุนุจุฑ Gemini API...</h3>
            <p id="loading-text">ุงูุชุญูู ูู ุงููุฏุฏ ุงููุธุงููุฉ...</p>
        </section>

        <!-- Result Dashboard (Hidden) -->
        <section id="dashboard" class="dashboard-section hidden">
            <div class="dashboard-header">
                <div class="status-badge" id="final-status">
                    <!-- JS will fill this -->
                </div>
                <h2>ุชูุฑูุฑ ุงูุชุฏููู ุงูุขูู</h2>
            </div>
            
            <div class="dashboard-grid">
                <!-- AI Reasoning Card -->
                <div class="glass-card wide">
                    <div class="card-header">
                        <i class="fa-solid fa-robot"></i>
                        <h3>ุงูุชุณุจูุจ ุงูุฐูู (Gemini)</h3>
                    </div>
                    <div class="card-body" id="ai-reasoning-body">
                        <!-- AI Text goes here -->
                    </div>
                </div>

                <!-- Timeline / Procedural Check -->
                <div class="glass-card">
                    <div class="card-header">
                        <i class="fa-solid fa-clock"></i>
                        <h3>ุงูุชุญูู ุงูุฅุฌุฑุงุฆู</h3>
                    </div>
                    <ul class="check-list" id="validation-list">
                        <!-- Items go here -->
                    </ul>
                </div>
                
                <!-- Action Card -->
                <div class="glass-card action-card">
                    <div class="card-header">
                        <i class="fa-solid fa-flag"></i>
                        <h3>ุงูุชูุตูุฉ ุงูุชุงููุฉ</h3>
                    </div>
                    <div class="action-body">
                         <h4 id="next-action-title">--</h4>
                         <button class="btn-primary" onclick="location.reload()">ุชุฏููู ุฏุนูู ุฃุฎุฑู</button>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <script src="{% static 'js/app.js' %}"></script>
</body>
</html>
